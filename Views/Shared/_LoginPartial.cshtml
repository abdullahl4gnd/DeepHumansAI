@using Microsoft.AspNetCore.Identity
@using DeepHumans.Models

@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

<div class="nav-links d-flex align-items-center">
    @if (SignInManager.IsSignedIn(User))
    {
        // Get the currently logged-in user
        var currentUser = await UserManager.GetUserAsync(User);
        var username = currentUser?.UserName ?? UserManager.GetUserName(User);

        <!-- Display username and Sign Out -->
        <a id="manage"
           class="cta-link d-flex align-items-center me-3"
           asp-area="Identity"
           asp-page="/Account/Manage/Index"
           title="Manage">
            <i class="fas fa-user me-1"></i> @username
        </a>

        <form id="logoutForm"
              class="form-inline mb-0"
              asp-area="Identity"
              asp-page="/Account/Logout"
              asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })"
              method="post">
            <button id="logout"
                    type="submit"
                    class="cta-link btn btn-link text-decoration-none">
                <i class="fas fa-sign-out-alt me-1"></i> Sign Out
            </button>
        </form>
    }
    else
    {
        <!-- Show Sign Up and Login when not authenticated -->
        <a class="cta-link me-3"
           id="register"
           asp-area="Identity"
           asp-page="/Account/Register"
           title="Sign Up">
            <i class="fas fa-user-plus me-1"></i> Sign Up
        </a>

        <a class="cta-link"
           id="login"
           asp-area="Identity"
           asp-page="/Account/Login"
           title="Login">
            <i class="fas fa-sign-in-alt me-1"></i> Login
        </a>
    }
</div>
