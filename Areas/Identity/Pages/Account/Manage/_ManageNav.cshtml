@inject SignInManager<DeepHumans.Models.ApplicationUser> SignInManager

@{
    // Safely get the current user and check if they have a password
    var currentUser = await SignInManager.UserManager.GetUserAsync(User);
    var hasPassword = currentUser != null && await SignInManager.UserManager.HasPasswordAsync(currentUser);
}

<ul class="nav flex-column text-start">
    <!-- Profile -->
    <li class="nav-item mb-2">
        <a class="btn btn-dark w-100 text-start @(ViewData["ActivePage"] as string == "Index" ? "active text-white bg-danger" : "")"
           asp-page="./Index">
            Profile
        </a>
    </li>

    <!-- Email -->
    <li class="nav-item mb-2">
        <a class="btn btn-dark w-100 text-start @(ViewData["ActivePage"] as string == "Email" ? "active text-white bg-danger" : "")"
           asp-page="./Email">
            Email
        </a>
    </li>

    <!-- Password -->
    @if (hasPassword)
    {
        <li class="nav-item mb-2">
            <a class="btn btn-dark w-100 text-start @(ViewData["ActivePage"] as string == "ChangePassword" ? "active text-white bg-danger" : "")"
               asp-page="./ChangePassword">
                Password
            </a>
        </li>
    }
</ul>
